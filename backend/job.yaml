$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json

display_name: spam-email-train-job
experiment_name: spam-classification-experiment
description: Training pipeline for Kaggle Spam/Ham dataset

# 1. Point to the 'src' folder next to this file
code: ./src 

environment:
  image: mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:latest
  # 2. Point to the conda file inside 'src'
  conda_file: ./src/conda.yaml

command: >-
  python train.py 
  --data ${{inputs.spam_data}}

inputs:
  spam_data:
    type: uri_file
    # 3. Use the Azure Data Asset you created earlier
    path: azureml:Spam_HAM:1
    
compute: azureml:spam-cluster